# ALB HPP Donations

–ü–ª–∞–≥—ñ–Ω WordPress –¥–ª—è –ø—Ä–∏–π–æ–º—É **–±–ª–∞–≥–æ–¥—ñ–π–Ω–∏—Ö –≤–Ω–µ—Å–∫—ñ–≤** —á–µ—Ä–µ–∑ **Hosted Payment Page** –ê–ª—å—è–Ω—Å –ë–∞–Ω–∫—É. –ú—ñ—Å—Ç–∏—Ç—å —à–æ—Ä—Ç–∫–æ–¥ `[alb_donate]`, UI –∞–¥–º—ñ–Ω–∫–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é –ø—Ä–∏—Å—Ç—Ä–æ—é, –±–µ–∑–ø–µ—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–æ–º, –∫—Ä–æ–Ω-–∑–∞–¥–∞—á—ñ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø–ª–∞—Ç–µ–∂—ñ–≤ —Ç–∞ –∞–≤—Ç–æ-–ø–µ—Ä–µ–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó.

---

## ‚ú® –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ **Alliance Bank HPP** (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—É, —Ä–µ–¥—ñ—Ä–µ–∫—Ç, –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è).
- **–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–æ–º** (—Å—Ç—Ä–æ–∫ –¥—ñ—ó 24 –≥–æ–¥): —â–æ–≥–æ–¥–∏–Ω–Ω–∏–π ¬´—Å—Ç–æ—Ä–æ–∂¬ª –æ–Ω–æ–≤–ª—é—î —Ç–æ–∫–µ–Ω, —è–∫—â–æ –∑–∞–ª–∏—à–∏–ª–æ—Å—å ‚â§ 12 –≥–æ–¥.
- **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –ø–ª–∞—Ç–µ–∂—ñ–≤** –∫–æ–∂–Ω—ñ 10 —Ö–≤–∏–ª–∏–Ω —á–µ—Ä–µ–∑ WP-Cron.
- –ê–¥–º—ñ–Ω-—Å—Ç–æ—Ä—ñ–Ω–∫–∏: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, **–Ü—Å—Ç–æ—Ä—ñ—è –ø–ª–∞—Ç–µ–∂—ñ–≤** (–∑ –∫–Ω–æ–ø–∫–æ—é **¬´–í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ –ø–ª–∞—Ç–µ–∂—ñ¬ª**).
- REST-–µ–Ω–¥–ø–æ—ó–Ω—Ç –¥–ª—è —Ä—É—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –ø–ª–∞—Ç–µ–∂—ñ–≤ (–ª–∏—à–µ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤).
- –õ–æ–≥–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `ALB_HPP_DEBUG`), –¥—Ä—É–∂–Ω—ñ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å **GMP**.
- –ö–æ—Ä–µ–∫—Ç–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ `tokenExpiration` (—Ç–∞–π–º–∑–æ–Ω–∞ `Europe/Kyiv`).

---

## üß© –í–∏–º–æ–≥–∏

- WordPress 6.0+
- PHP 8.0+ (—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –Ω–∞ 8.1)
- –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è PHP: GMP, HASH, OpenSSL (–¥–ª—è SimpleJWT)
- –í–∏—Ö—ñ–¥ –≤ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ HPP API –±–∞–Ω–∫—É

---

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –ø–∞–ø–∫—É –ø–ª–∞–≥—ñ–Ω—É –¥–æ `/wp-content/plugins/` –∞–±–æ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å ZIP —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω–∫—É.
2. –ê–∫—Ç–∏–≤—É–π—Ç–µ **ALB HPP Donations** —É **–ü–ª–∞–≥—ñ–Ω–∏ ‚Üí –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ**.
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí ALB HPP Donations** —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å:
   - Base URL / `serviceCode` / `merchantId`
   - `successUrl` / `failUrl` / `notificationUrl`
   - –†–µ–∂–∏–º –¥–µ–∫—Ä–∏–ø—Ç—É (–ª–æ–∫–∞–ª—å–Ω–∏–π SimpleJWT –∞–±–æ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏–π API)
4. –ü—Ä–æ–π–¥—ñ—Ç—å **–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é –ø—Ä–∏—Å—Ç—Ä–æ—é**.
5. (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å **WP Crontrol** –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ø–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞.

---

## ‚öôÔ∏è –ö—Ä–æ–Ω

–ü–ª–∞–≥—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î WP-Cron (–≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Ç—Ä–∞—Ñ—ñ–∫–æ–º –∞–±–æ —Å–∏—Å—Ç–µ–º–Ω–∏–º cron‚Äô–æ–º).

- `alb_hpp_token_guard_cron`
- `alb_hpp_sync_cron`

> –ù–∞ –ø—Ä–æ–¥—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ —Å–∏—Å—Ç–µ–º–Ω–∏–π cron, —â–æ –≤–∏–∫–ª–∏–∫–∞—î `wp-cron.php` –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω.

---

## üîå REST API

- `alb/v1 /create-order` ‚Äî alb-hpp-donations/alb-hpp-donations.php
- `alb/v1 /notify` ‚Äî alb-hpp-donations/alb-hpp-donations.php
- `alb/v1 /sync-order` ‚Äî alb-hpp-donations/alb-hpp-donations.php
- `alb/v1 /sync-pending` ‚Äî alb-hpp-donations/alb-hpp-donations.php
- `alb/v1 /reauthorize-now` ‚Äî alb-hpp-donations/alb-hpp-donations.php

–ü—Ä–∏–∫–ª–∞–¥: `POST /wp-json/alb/v1/sync-pending` ‚Üí `{"ok": true, "synced": <n>}` (–¥–æ—Å—Ç—É–ø –ª–∏—à–µ –∞–¥–º—ñ–Ω–∞–º).

---

## üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

- `alb_hpp_payments`

> –Ü–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü—å –º–∞—é—Ç—å –ø—Ä–µ—Ñ—ñ–∫—Å `$wpdb->prefix` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `wp_`).

---

## üß™ –£—Å—É–Ω–µ–Ω–Ω—è –Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

- **`Call to undefined function gmp_init()`** ‚Äî —É–≤—ñ–º–∫–Ω—ñ—Ç—å/–≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `ext-gmp` (`php-gmp`).
- **–ß–∞—Å ¬´–º—ñ–Ω—É—Å 3 –≥–æ–¥–∏–Ω–∏¬ª** ‚Äî —É **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö WP** –≤–∏—Å—Ç–∞–≤—Ç–µ —Ç–∞–π–º–∑–æ–Ω—É `Europe/Kyiv` (—É–Ω–∏–∫–∞–π—Ç–µ `Etc/GMT+3`).
- **WP-Cron –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î** ‚Äî –¥–æ–¥–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω–∏–π cron, —â–æ –≤–∏–∫–ª–∏–∫–∞—î `wp-cron.php`.
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –ø—Ä–∏—Å—Ç—Ä–æ—é –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–ª—é—á—ñ/–º–µ—Ä–µ–∂—É; —É–≤—ñ–º–∫–Ω—ñ—Ç—å `ALB_HPP_DEBUG` (–ª–æ–≥–∏ —É `wp-content/uploads/alb-logs/`).


---


## üìú –õ—ñ—Ü–µ–Ω–∑—ñ—è

GPL-2.0-or-later (`LICENSE`).

---
